version: "3.9"

services:
  next-captive-portal:
    build:
      context: .
      dockerfile: Dockerfile
    image: next-captive-portal
    container_name: next-captive-portal
    ports:
      - "4023:3000"
    environment:
      - NODE_ENV=production
      - HOSTNAME=0.0.0.0
      - PORT=3000
      # Uncomment to disable Next.js telemetry
      # - NEXT_TELEMETRY_DISABLED=1
      
      # Development/Test Settings
      - USE_SEED_DATA
      
      # Site Metadata
      - SITE_TITLE
      - SITE_DESCRIPTION
      - BRAND_NAME
      
      # Navigation and Links
      - LOGO_CLICK_URL
      - HOME_URL
      - VIEW_ALL_NEWS_URL
      
      # Hotspot Configuration
      - HOTSPOT_PROVIDER_NAME
      - HOTSPOT_FREE_DATA_AMOUNT
      - HOTSPOT_WELCOME_MESSAGE
      - HOTSPOT_SSID
      
      # Mikrotik Credentials and Settings
      - MIKROTIK_DEFAULT_USERNAME
      - MIKROTIK_DEFAULT_PASSWORD
      - MIKROTIK_RADIUS_DESK_BASE_URL
      - MIKROTIK_REDIRECT_URL
      
      # Revive Ad Configuration
      - ADS_REVIVE_SERVER_URL
      - ADS_ZONE_ID
      - ADS_REVIVE_ID
      
      # UI Messages
      - MESSAGE_LOADING_CONNECT
      - MESSAGE_SUCCESS_CONNECT
      - MESSAGE_ERROR_CONNECT
      - MESSAGE_CURRENT_PLAN_TITLE
      - MESSAGE_OUT_OF_INTERNET
      - MESSAGE_VOUCHER_PLACEHOLDER
      
      # Theme Selection
      - SELECTED_THEME
    env_file:
      - .env
    restart: unless-stopped
    networks:
      - default
      - public-proxy

networks:
  default:
    name: next-captive-portal
  public-proxy:
    external: true
